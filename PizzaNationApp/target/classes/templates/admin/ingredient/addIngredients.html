<main xmlns:th="http://www.w3.org/1999/xhtml">
    <div class="wrapper">
        <div class="page_pad_smalltop">

            <div class="ingredientsTable">

                <div class="pad10"></div>

                <div class="breadcrumbs">
                    <a href="/admin/">Admin</a>
                    <a href="/admin/products/all">Products</a>
                </div>

                <h2 class="ingredientGreeting">Add Ingredients to current product</h2>

                <div class="pad5"></div>
                <div class="errorbox align_center" th:if="${add_ingredient_error} != null"
                     th:text="${add_ingredient_error}"></div>
                <div class="pad10"></div>

                <form method="post" th:action="@{/admin/product/{name}/addIngredients(name=${productName})}"
                      th:object="${model}">
                    <table>
                        <tr>
                            <th>#</th>
                            <th>Ingredient Name</th>
                            <th>Quantity</th>
                            <th>Unit</th>
                        </tr>

                        <th:block th:each="ingredient,iter : ${model.ingredients}">
                            <tr>
                                <td th:text="${iter.index + 1}"></td>
                                <td><input type="text" class="form_item"
                                           th:field="*{ingredients[__${iter.index}__].name}">
                                </td>
                                <td><input type="number" step="0.001" class="form_item" value="0"
                                           th:field="*{ingredients[__${iter.index}__].quantity}"></td>
                                <td>
                                    <select class="form_item" th:field="*{ingredients[__${iter.index}__].unit}">
                                        <option th:each="unit : ${unitsList}" th:value="${unit}"
                                                th:text="${#strings.capitalize(#strings.toLowerCase(unit))}">1
                                        </option>
                                    </select>
                                </td>
                            </tr>
                        </th:block>
                    </table>

                    <input type="submit" class="button_flat button_flat_green" value="Set Ingredients">
                </form>

            </div>
        </div>
    </div>
</main>